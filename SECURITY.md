# セキュリティポリシー(Security Policy)

## サポートされるバージョン

現在，セキュリティアップデートの対象となるバージョンは以下の通りです:

| バージョン | サポート状況       |
| ---------- | ------------------ |
| 0.1.x      | :white_check_mark: |
| < 0.1.0    | :x:                |

## 脆弱性の報告

セキュリティ上の脆弱性を発見した場合は，以下のガイドラインに従って報告してください．

### 報告方法

**❌ 公開しないでください**
- GitHub Issues
- 公開されたディスカッション
- ソーシャルメディア

**✅ 非公開で報告してください**
- GitHub Security AdvisoriesのPrivate vulnerability reporting機能

### 報告に含めるべき情報

以下の情報を可能な限り含めてください:

1. **脆弱性の種類**
2. **影響を受けるバージョン**
3. **脆弱性の詳細な説明**
4. **再現手順**(可能な場合はPoCコードも)
5. **潜在的な影響**
6. **推奨される修正方法**(わかる場合)

### セキュリティ脆弱性の例

このプロジェクトで特に注意すべきセキュリティ課題:

#### 認証情報の漏洩
- MaxMind APIキーの不適切な処理
- ログへの認証情報出力
- 環境変数の不適切な取り扱い

#### ネットワークセキュリティ
- リクエストの不適切な検証
- レート制限の回避

#### データセキュリティ
- ユーザーIPアドレスの不適切な処理
- キャッシュデータの不適切な暴露
- Redis接続のセキュリティ問題

#### 依存関係の脆弱性
- 古いライブラリの使用
- 脆弱性のある依存パッケージ

## 応答時間

私たちは以下のタイムラインで対応することを目標としています:

- **初期応答**: 48時間以内
- **脆弱性の確認**: 7日以内
- **修正版リリース**: 重要度により14-30日以内

## 脆弱性の開示プロセス

### 1. 報告受領
- 報告を受領し，48時間以内に受領確認を送信
- 脆弱性に一意のIDを割り当て

### 2. 初期評価
- 脆弱性の存在確認
- 重要度の評価(Critical, High, Medium, Low)
- 影響範囲の分析

### 3. 修正開発
- 修正コードの開発
- テストの実施
- セキュリティレビュー

### 4. 調整された開示
- 報告者との調整
- 修正版のリリース
- セキュリティアドバイザリの公開

## 重要度の判定基準

### Critical(緊急)
- リモートコード実行
- 認証バイパス
- 機密データの大量漏洩

### High(高)
- 権限昇格
- 重要な機能の迂回
- 機密データの部分漏洩

### Medium(中)
- サービス拒否攻撃
- 情報漏洩(限定的)
- セッション管理の問題

### Low(低)
- 軽微な情報漏洩
- 設定の問題
- ログの問題

## セキュリティのベストプラクティス

### 開発者向け

1. **認証情報の管理**
```python
# ✅ 良い例
api_key = os.getenv("MAXMIND_LICENSE_KEY")
if not api_key:
    raise ConfigurationError("API key not found")

# ❌ 悪い例
api_key = "your_hardcoded_key_here"
```

2. **入力検証**
```python
# ✅ 良い例
def validate_ip_address(ip: str) -> bool:
    try:
        ip_address(ip)
        return True
    except ValueError:
        return False

# ❌ 悪い例
def get_info(ip: str):
    # 検証なしで外部APIに送信
    return api.get(f"http://api.example.com/{ip}")
```

### ユーザー向け

1. **認証情報の保護**
- 環境変数を使用してAPIキーを管理

2. **ネットワークセキュリティ**
- 適切なファイアウォール設定
- VPNの使用(必要に応じて)

3. **依存関係の管理**
- 定期的な依存関係の更新
- セキュリティアラートの監視
- 信頼できるソースからのパッケージ使用

## セキュリティツール

このプロジェクトでは以下のセキュリティツールを使用しています:

- **GitHub Security Advisories**: 依存関係の脆弱性監視
- **Dependabot**: 自動的な依存関係更新

## 謝辞

セキュリティ脆弱性を責任ある方法で報告してくださる研究者やユーザーに感謝いたします．あなたの協力により，すべてのユーザーの安全性が向上します．

## 連絡先

セキュリティに関する質問や懸念がある場合は，お気軽にお問い合わせください:

---

**重要**: セキュリティの脆弱性は責任を持って開示してください．公開する前に，私たちが修正する時間を与えてください．
